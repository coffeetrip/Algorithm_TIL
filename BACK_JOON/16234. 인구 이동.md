# 16234. 인구 이동

```python
def f(si, sj, N, L, R):
    global visited, moved
    q = [(si, sj)]
    visited[si][sj] = 1
    move = []
    cnt = 0
    people = 0
    while q:
        i, j = q.pop(0)
        cnt += 1
        people += arr[i][j]
        move.append((i, j))
        for di, dj in (-1, 0), (0, 1), (1, 0), (0, -1):
            ni, nj = i + di, j + dj
            if 0 <= ni < N and 0 <= nj < N and visited[ni][nj] == 0 and L <= abs(arr[ni][nj] - arr[i][j]) <= R:
                visited[ni][nj] = 1
                q.append((ni, nj))
    
    if cnt > 1:
        for a, b in move:
            arr[a][b] = people//cnt
        moved = True


N, L, R = map(int, input().split())
arr = [list(map(int, input().split())) for _ in range(N)]
cnt = 0
while True:
    moved = False
    visited = [[0]*N for _ in range(N)]
    for i in range(N):
        for j in range(N):
            if visited[i][j] == 0:
                f(i, j, N, L, R)
    if moved:
        cnt += 1
    else:
        break
print(cnt)
```



```python
def f(si, sj, N):
    global v, moved
    q = [(si, sj)]
    v[si][sj] = 1

    move = []
    while q:
        i, j = q.pop(0)
        move.append((i, j))
        for di, dj in (1, 0), (-1, 0), (0, 1), (0, -1):
            ni, nj = i + di, j + dj
            if 0 <= ni < N and 0 <= nj < N and L <= abs(arr[ni][nj] - arr[i][j]) <= R and v[ni][nj] == 0:
                v[ni][nj] = 1
                q.append((ni, nj))

    mlen = len(move)
    if mlen > 1:
        msum = 0
        for x, y in move:
            msum += arr[x][y]
        for x, y in move:
            arr[x][y] = msum//mlen
        moved = True


N, L, R = map(int, input().split())
arr = [list(map(int, input().split())) for _ in range(N)]

cnt = 0
while True:
    v = [[0] * N for _ in range(N)]
    moved = False
    for i in range(N):
        for j in range(N):
            if v[i][j] == 0:
                f(i, j, N)

    if moved:
        cnt += 1
    else:
        break

print(cnt)
```

