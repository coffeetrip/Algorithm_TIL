### 16509. 장군

```python
def bfs(ai, aj):
    global visited
    front, rear = -1, 0
    queue = [0]*(9*10)
    queue[rear] = (ai, aj)
    di = [[0, -1, -1], [-1, -1, -1], [-1, -1, -1], [0, -1, -1], [0, 1, 1], [1, 1, 1], [1, 1, 1], [0, 1, 1]]
    dj = [[-1, -1, -1], [0, -1, -1], [0, 1, 1], [1, 1, 1], [1, 1, 1], [0, 1, 1], [0, -1, -1], [-1, -1, -1]]
    visited[ai][aj] = 0

    while front != rear:
        front += 1
        i, j = queue[front]
        for k in range(8):
            ni, nj = i, j
            for m in range(3):
                ni += di[k][m]
                nj += dj[k][m]
                if 0 <= ni < 10 and 0 <= nj < 9 and visited[ni][nj] == -1:
                    if ni == ER and nj == EC and m < 2:
                        break
                    elif ni == ER and nj == EC and m == 2:
                        return visited[i][j] + 1
                    elif (ni != ER or nj != EC) and m == 2:
                        visited[ni][nj] = visited[i][j] + 1
                        rear += 1
                        queue[rear] = (ni, nj)
    return -1

SR, SC = map(int, input().split())
ER, EC = map(int, input().split())
visited = [[-1] * 9 for _ in range(10)]
print(bfs(SR, SC))
```

```python
def bfs(ai, aj):
    global visited
    queue = [(ai, aj)]
    di = [[0, -1, -1], [-1, -1, -1], [-1, -1, -1], [0, -1, -1], [0, 1, 1], [1, 1, 1], [1, 1, 1], [0, 1, 1]]
    dj = [[-1, -1, -1], [0, -1, -1], [0, 1, 1], [1, 1, 1], [1, 1, 1], [0, 1, 1], [0, -1, -1], [-1, -1, -1]]
    visited[ai][aj] = 0

    while queue:
        i, j = queue.pop(0)
        for k in range(8):
            ni, nj = i, j
            for m in range(3):
                ni += di[k][m]
                nj += dj[k][m]
                if 0 <= ni < 10 and 0 <= nj < 9 and visited[ni][nj] == -1:
                    if ni == ER and nj == EC and m < 2:
                        break
                    elif ni == ER and nj == EC and m == 2:
                        return visited[i][j] + 1
                    elif (ni != ER or nj != EC) and m == 2:
                        visited[ni][nj] = visited[i][j] + 1
                        queue.append([ni, nj])
    return -1

SR, SC = map(int, input().split())
ER, EC = map(int, input().split())
visited = [[-1] * 9 for _ in range(10)]
print(bfs(SR, SC))
```



