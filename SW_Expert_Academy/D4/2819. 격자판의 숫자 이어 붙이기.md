### 2819. 격자판의 숫자 이어 붙이기

```python
def seven(i, j, count, path):
    global grid
    global another

    di = [0, 1, 0, -1]
    dj = [1, 0, -1, 0]

    if count == 6:
        another.add(tuple(path))
    else:
        for k in range(4):
            ni = i + di[k]
            nj = j + dj[k]
            if 0 <= ni < 4 and 0 <= nj < 4:
                seven(ni, nj, count + 1, path + [grid[ni][nj]])


T = int(input())
for tc in range(1, T + 1):
    grid = [list(map(int, input().split())) for _ in range(4)]

    another = set()

    for i in range(4):
        for j in range(4):
            seven(i, j, 0, [grid[i][j]])

    print('#{} {}' .format(tc, len(another)))
```

```python
def find(i, j, n, s):
    global collection
    global board
    dc = [0, 1, 0, -1]
    dr = [1, 0, -1, 0]
    
    if n == 7:
        collection.add(s)
    else:
        for k in range(4):
            nc = i + dc[k]
            nr = j + dr[k]
            if 0 <= nc < 4 and 0 <= nr < 4:
                find(nc, nr, n + 1, s + str(board[nc][nr]))
 
t = int(input())
for tc in range(1, t + 1):
    board = [list(map(int, input().split())) for i in range(4)]
    
    collection = set()
    for i in range(4):
        for j in range(4):
            find(i, j, 0, '')
 
    print("#{} {}".format(tc, len(collection)))
```

```python
def bfs(x, y, r):
    global grid, result, di, dj
 
    r += grid[x][y]
 
    if len(r) == 7:
        result.add(r)
        return
    else:
        for k in range(4):
            ni = x + di[k]
            nj = y + dj[k]
            if 0 <= ni < 4 and 0 <= nj < 4:
                bfs(ni, nj, r)
 
di = [0, 1, 0, -1]
dj = [1, 0, -1, 0]
T = int(input())
for tc in range(1, T+1):
    grid = [input().split() for _ in range(4)]
 
    result = set()
    res = ''
    for i in range(4):
        for j in range(4):
            bfs(i, j, res)
    print('#{} {}'.format(tc, len(result)))
```



```
list는 append()함수를 이용해서 추가하지만,

set은 add()함수를 이용해서 추가할 수 있다.


list내부 검사할 때 in을 이용하는데 list가 순차적으로 접근하는 배열이기 때문에 시간이 많이 걸린다.

그래서 set을 이용하여 시간을 줄였습니다.


방향을 4가지로 나눠서 함수를 정의해야했는데 재귀함수를 이용하여 다른 4방향으로 이동하였습니다. 
```