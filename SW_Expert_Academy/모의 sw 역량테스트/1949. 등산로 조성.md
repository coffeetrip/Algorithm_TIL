# 등산로 조성

```python
def move(i, j):
    di = [0, 1, 0, -1]
    dj = [1, 0, -1, 0]
    cnt = 0
    for k in range(4):
        ni = i + di[k]
        nj = j + dj[k]
        if 0 <= ni < N and 0 <= nj < N:
            if zido[i][j] > zido[ni][nj]:
                m = move(ni, nj)
                if cnt < m:
                    cnt = m
    return cnt + 1



for tc in range(1, int(input())+1):
    N, K = map(int, input().split())  # 길이, 공사 가능 깊이
    zido = [list(map(int, input().split())) for _ in range(N)]

    max_height = 0
    for i in range(N):
        for j in range(N):
            if zido[i][j] > max_height:
                max_height = zido[i][j]

    move_length = 0
    for i in range(N):
        for j in range(N):
            if zido[i][j] == max_height:
                m = move(i, j)
                if move_length < m:
                    move_length = m

    print('#{} {}' .format(tc, move_length))
```



```python
# 깎지 않고 길이
def move(i, j, e):
    global N
    global maxV

    if maxV < e:
        maxV = e

    di = [0, 1, 0, -1]
    dj = [1, 0, -1, 0]
    for k in range(4):
        ni = i + di[k]
        nj = j + dj[k]
        if ni>=0 and ni<N and nj>=0 and nj<N:
            if zido[i][j]>zido[ni][nj]:
                move(ni, nj, e+1)

T = int(input())
for tc in range(1, T+1):
    N, K = map(int, input().split())  # 지도 길이, 최대 공사 가능 깊이
    zido = [list(map(int, input().split())) for _ in range(N)]

    max_height = 0
    for i in range(N):
        for j in range(N):
            if zido[i][j] > max_height:
                max_height = zido[i][j]

    maxV = 0
    for i in range(N):
        for j in range(N):
            if zido[i][j] == max_height:
                move(i, j, 1)
    print('#{} {}' .format(tc, maxV))
```

